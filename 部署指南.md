# å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²æŒ‡å—

## ä¸€ã€ç¯å¢ƒè¦æ±‚

- Node.js (ç‰ˆæœ¬ 14 æˆ–ä»¥ä¸Š)
- MongoDB (ç‰ˆæœ¬ 4.4 æˆ–ä»¥ä¸Š)
- Nginx (å¯é€‰ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)

## äºŒã€å®‰è£…æ­¥éª¤

### 2.1 å®‰è£… MongoDB

1. **ä¸‹è½½ MongoDB**
   - è®¿é—® https://www.mongodb.com/try/download/community
   - ä¸‹è½½é€‚åˆæ‚¨æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬

2. **å¯åŠ¨ MongoDB æœåŠ¡**
   ```bash
   # Windows
   mongod --dbpath C:\data\db
   
   # Linux/Mac
   mongod --dbpath /data/db
   ```

3. **éªŒè¯ MongoDB æ˜¯å¦è¿è¡Œ**
   ```bash
   mongo --version
   ```

### 2.2 å®‰è£…åç«¯ä¾èµ–

```bash
cd backend
npm install
```

### 2.3 é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
   ```bash
   cd backend
   cp .env.example .env
   ```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ä¿®æ”¹ç«¯å£æˆ–æ•°æ®åº“è¿æ¥ï¼‰ï¼š
   ```
   PORT=3000
   MONGODB_URI=mongodb://localhost:27017/student_management
   ```

### 2.4 å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
npm start
# æˆ–ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev
```

æœåŠ¡å¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
```
âœ… MongoDB è¿æ¥æˆåŠŸ
ğŸš€ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
```

### 2.5 ç›´æ¥è®¿é—®å‰ç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€å‰ç«¯æ–‡ä»¶ï¼š
```
file:///E:/study/Git/student-management-system/frontend/index.html
```

**æ³¨æ„**ï¼šç”±äº CORS é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨ Nginx éƒ¨ç½²æˆ–ä½¿ç”¨ HTTP æœåŠ¡å™¨ã€‚

## ä¸‰ã€ä½¿ç”¨ Nginx éƒ¨ç½²ï¼ˆæ¨èï¼‰

### 3.1 å®‰è£… Nginx

**Windows:**
1. ä¸‹è½½ Nginx: http://nginx.org/en/download.html
2. è§£å‹åˆ° C:\nginx

**Linux (Ubuntu/Debian):**
```bash
sudo apt update
sudo apt install nginx
```

### 3.2 é…ç½® Nginx

1. **Windows:**
   - ç¼–è¾‘ `C:\nginx\conf\nginx.conf`
   - æˆ–å¤åˆ¶é¡¹ç›®ä¸­çš„ `nginx.conf` åˆ° `C:\nginx\conf\nginx.conf`

2. **Linux:**
   ```bash
   sudo cp nginx.conf /etc/nginx/sites-available/student-management.conf
   sudo ln -s /etc/nginx/sites-available/student-management.conf /etc/nginx/sites-enabled/
   ```

3. **ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„**ï¼š
   å°†é…ç½®æ–‡ä»¶ä¸­çš„å‰ç«¯è·¯å¾„ä¿®æ”¹ä¸ºå®é™…è·¯å¾„ï¼š
   ```nginx
   root E:/study/Git/student-management-system/frontend;
   ```

### 3.3 å¯åŠ¨ Nginx

**Windows:**
```bash
cd C:\nginx
start nginx
# æˆ–
nginx.exe
```

**Linux:**
```bash
sudo systemctl start nginx
# æˆ–
sudo nginx
```

### 3.4 é‡å¯ Nginxï¼ˆä¿®æ”¹é…ç½®åï¼‰

**Windows:**
```bash
nginx.exe -s reload
```

**Linux:**
```bash
sudo nginx -s reload
# æˆ–
sudo systemctl reload nginx
```

### 3.5 è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost
```

## å››ã€æµ‹è¯• API

### 4.1 ä½¿ç”¨æµè§ˆå™¨æµ‹è¯•

è®¿é—®å¥åº·æ£€æŸ¥æ¥å£ï¼š
```
http://localhost:3000/api/health
```

### 4.2 ä½¿ç”¨ PowerShell æµ‹è¯• API

```powershell
# æµ‹è¯•å¥åº·æ£€æŸ¥
Invoke-RestMethod -Uri http://localhost:3000/api/health

# åˆ›å»ºå­¦ç”Ÿ
$body = @{
    name = "å¼ ä¸‰"
    studentId = "2024001"
    class = "ä¸€ç­"
    score = 95
} | ConvertTo-Json

Invoke-RestMethod -Uri http://localhost:3000/api/students -Method Post -Body $body -ContentType "application/json"

# è·å–æ‰€æœ‰å­¦ç”Ÿ
Invoke-RestMethod -Uri http://localhost:3000/api/students
```

## äº”ã€åŠŸèƒ½ä½¿ç”¨è¯´æ˜

### 5.1 æ·»åŠ å­¦ç”Ÿä¿¡æ¯
1. å¡«å†™å­¦ç”Ÿå§“åã€å­¦å·ã€ç­çº§ã€æˆç»©
2. ç‚¹å‡»"æäº¤"æŒ‰é’®
3. å­¦ç”Ÿä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹åˆ—è¡¨ä¸­

### 5.2 ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯
1. ç‚¹å‡»åˆ—è¡¨ä¸­çš„"ç¼–è¾‘"æŒ‰é’®
2. è¡¨å•ä¼šè‡ªåŠ¨å¡«å……è¯¥å­¦ç”Ÿçš„ä¿¡æ¯
3. ä¿®æ”¹åç‚¹å‡»"æ›´æ–°"æŒ‰é’®

### 5.3 åˆ é™¤å­¦ç”Ÿä¿¡æ¯
1. ç‚¹å‡»åˆ—è¡¨ä¸­çš„"åˆ é™¤"æŒ‰é’®
2. ç¡®è®¤åˆ é™¤æ“ä½œ

### 5.4 ç­›é€‰å­¦ç”Ÿ
1. åœ¨ç­›é€‰åŒºåŸŸè¾“å…¥ç­çº§æˆ–æˆç»©èŒƒå›´
2. ç‚¹å‡»"ç­›é€‰"æŒ‰é’®
3. ç‚¹å‡»"é‡ç½®"å¯æ¸…é™¤ç­›é€‰æ¡ä»¶

### 5.5 ç”Ÿæˆ AI åˆ†ææŠ¥å‘Š
1. ç‚¹å‡»"ğŸ¤– AI åˆ†ææŠ¥å‘Š"æŒ‰é’®
2. ç³»ç»Ÿä¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„æŠ¥å‘Šï¼š
   - æ•´ä½“ç»Ÿè®¡ï¼ˆå¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†ç­‰ï¼‰
   - æˆç»©åˆ†å¸ƒï¼ˆä¼˜ç§€ã€è‰¯å¥½ã€åŠæ ¼ã€ä¸åŠæ ¼äººæ•°ï¼‰
   - ç­çº§åˆ†æ
   - æˆç»©æ’å Top 10
   - AI æ”¹è¿›å»ºè®®

## å…­ã€æ•…éšœæ’æŸ¥

### 6.1 MongoDB è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
âŒ MongoDB è¿æ¥å¤±è´¥: connect ECONNREFUSED
```

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤ MongoDB æœåŠ¡å·²å¯åŠ¨
2. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥åœ°å€
3. ç¡®è®¤ç«¯å£ 27017 æœªè¢«å ç”¨

### 6.2 CORS é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Access to fetch at 'http://localhost:3000/api/students' from origin 'null' has been blocked by CORS policy
```

**è§£å†³æ–¹æ³•**ï¼š
1. ä½¿ç”¨ Nginx éƒ¨ç½²å‰ç«¯
2. æˆ–è€…ä½¿ç”¨ HTTP æœåŠ¡å™¨å¯åŠ¨å‰ç«¯ï¼ˆä¸è¦ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶ï¼‰

### 6.3 ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: listen EADDRINUSE: address already in use :::3000
```

**è§£å†³æ–¹æ³•**ï¼š
1. ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ PORT é…ç½®
2. æˆ–è€…å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº

**Windows æŸ¥æ‰¾å ç”¨ç«¯å£çš„ç¨‹åº**ï¼š
```powershell
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

### 6.4 Nginx æ— æ³•å¯åŠ¨

**æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•**ï¼š
```bash
nginx -t
```

**æŸ¥çœ‹é”™è¯¯æ—¥å¿—**ï¼š
```bash
# Windows
type C:\nginx\logs\error.log

# Linux
tail -f /var/log/nginx/error.log
```

## ä¸ƒã€åœæ­¢æœåŠ¡

### 7.1 åœæ­¢åç«¯æœåŠ¡
åœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯ä¸­æŒ‰ `Ctrl + C`

### 7.2 åœæ­¢ Nginx

**Windows:**
```bash
nginx.exe -s stop
```

**Linux:**
```bash
sudo systemctl stop nginx
# æˆ–
sudo nginx -s stop
```

### 7.3 åœæ­¢ MongoDB

**Windows:**
åœ¨è¿è¡Œ MongoDB çš„ç»ˆç«¯ä¸­æŒ‰ `Ctrl + C`

**Linux:**
```bash
sudo systemctl stop mongod
```

## å…«ã€ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **æ•°æ®åº“å®‰å…¨**ï¼š
   - ä¸º MongoDB æ·»åŠ è®¤è¯
   - ä½¿ç”¨å¼ºå¯†ç 
   - é™åˆ¶æ•°æ®åº“è®¿é—® IP

2. **Nginx ä¼˜åŒ–**ï¼š
   - å¯ç”¨ gzip å‹ç¼©
   - é…ç½® SSL è¯ä¹¦ï¼ˆHTTPSï¼‰
   - è®¾ç½®è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—

3. **åç«¯ä¼˜åŒ–**ï¼š
   - æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶
   - å®ç°ç”¨æˆ·è®¤è¯å’Œæˆæƒ
   - æ·»åŠ æ—¥å¿—è®°å½•
   - ä½¿ç”¨ PM2 ç®¡ç† Node.js è¿›ç¨‹

4. **å¤‡ä»½**ï¼š
   - å®šæœŸå¤‡ä»½ MongoDB æ•°æ®
   - å¤‡ä»½é…ç½®æ–‡ä»¶

## ä¹ã€é¡¹ç›®ç»“æ„

```
student-management-system/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ server.js           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json        # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ .env                # ç¯å¢ƒå˜é‡ï¼ˆéœ€åˆ›å»ºï¼‰
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ styles.css          # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ app.js              # å‰ç«¯é€»è¾‘
â”œâ”€â”€ nginx.conf              # Nginx é…ç½®æ–‡ä»¶
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ éœ€æ±‚æ‹†è§£æ–‡æ¡£.md          # éœ€æ±‚æ–‡æ¡£
â””â”€â”€ éƒ¨ç½²æŒ‡å—.md              # æœ¬æ–‡æ¡£
```

## åã€è”ç³»ä¸æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ‰€æœ‰æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨
2. é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
3. ç«¯å£æ˜¯å¦è¢«å ç”¨
4. é˜²ç«å¢™è®¾ç½®æ˜¯å¦é˜»æ­¢äº†è¿æ¥
